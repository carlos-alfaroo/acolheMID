<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Inventario{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <!-- FONT -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <script src="//unpkg.com/alpinejs" defer></script> <!-- Necesario tener Alpine.js cargado en base-home para el modulo de flash messages -->

</head>
<body class="flex flex-col h-screen">
    {% include "components/_flash_messages.html" %}
    {% block header %}
    <header class="bg-green-900 text-white fixed w-full top-0 z-50 shadow">
      <div class="flex items-center justify-between px-6 py-3">
      
        <!-- Logo / título -->
      <a href="{{ url_for('home.home') }}">
        <div class="flex items-center space-x-3">
          <img src="{{ url_for('static', filename='canabis.png') }}" class="w-8 h-8" alt="Logo">
          <h1 class="text-xl font-bold">Inventario</h1>
        </div>
      </a>

      <!-- Barra de búsqueda -->
      <form action="{{ url_for('inventory.search_products') }}" method="GET" class="flex flex-1 mx-6">
        <input type="text" name="query" placeholder="Buscar productos..." 
               class="w-full px-4 py-2 rounded-l-lg text-black focus:outline-none focus:ring-2 focus:ring-green-400">
        <button type="submit" 
                class="bg-green-700 hover:bg-green-800 text-white px-4 py-2 rounded-r-lg">
          Buscar
        </button>
      </form>

      <!-- Menú derecho -->
      <div class="flex items-center space-x-4">
      <!-- Notificaciones -->
      <button class="relative">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" 
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11
                   a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341
                   C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 
                   1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 
                   0v-1m6 0H9"/>
        </svg>
        <span class="absolute top-0 right-0 inline-flex items-center justify-center
                     w-3 h-3 text-[10px] font-bold leading-none text-red-100
                     bg-red-600 rounded-full">30</span>
      </button>

      <!-- Perfil -->
      <div class="relative" x-data="{ open: false }">
        <button @click="open = !open" class="flex items-center space-x-2">
          <img src="https://ui-avatars.com/api/?name=Admin" class="w-8 h-8 rounded-full border border-white" alt="Perfil">
          <span class="hidden md:inline">Admin</span>
        </button>
        <div x-show="open" @click.away="open = false" 
       class="absolute right-0 mt-2 w-40 bg-white text-black rounded shadow-md">
          <a href="{{ url_for('auth.dashboard') }}" class="block px-4 py-2 hover:bg-gray-100">Perfil</a>
          <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 hover:bg-gray-100">Cerrar sesión</a>
        </div>
      </div>
    </div>
  </div>
</header>
    {% endblock %}

    <!-- Layout principal -->
    <div class="flex flex-1 pt-16">

      <!-- Sidebar -->
      <aside class="w-64 bg-white shadow-md h-screen fixed top-16 left-0">
      <div class="p-6 text-center font-bold text-xl border-b">Admin Panel</div>
      <nav class="mt-6">
        <a href="{{ url_for('inventory.dashboard_admin') }}" class="block py-2 px-6 hover:bg-gray-200 rounded">Principal</a>
        <a href="{{ url_for('inventory.products_inventory') }}" class="block py-2 px-6 hover:bg-gray-200 rounded">Productos</a>
        <a href="" class="block py-2 px-6 hover:bg-gray-200 rounded">Categorías</a>
        <a href="" class="block py-2 px-6 hover:bg-gray-200 rounded">Pedidos</a>
        <a href="{{url_for('inventory.users_inventory')}}" class="block py-2 px-6 hover:bg-gray-200 rounded">Usuarios</a>
        <a href="" class="block py-2 px-6 hover:bg-gray-200 rounded">Reportes</a>
        <a href=" " class="block py-2 px-6 hover:bg-gray-200 rounded">Configuración</a>
        <a href=" " class="block py-2 px-6 hover:bg-gray-200 rounded">Volver al Dashboard</a>
        <a href="{{url_for('auth.logout')}}" class="block py-2 px-6 hover:bg-gray-200 rounded">Cerrar Sesión</a>
      </nav>
      </aside>

      <!-- Contenido principal -->
      <main class="flex-1 p-8 ml-64 overflow-y-auto">
        {% block content %}
        {% endblock %}
      </main>
    </div>
    
</body>
</html>